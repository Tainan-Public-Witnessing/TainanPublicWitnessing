<mat-card class="shift-card h-full box-border">
  <mat-card-header *ngIf="crew !== null">
    <mat-card-title>
      <div>{{ shift?.date }}</div>
      <div><mat-icon>schedule</mat-icon>{{ shiftHours?.name }}</div>
      <div><mat-icon>pin_drop</mat-icon>{{ site?.name }}</div>
    </mat-card-title>

    <mat-card-subtitle>
      {{ "GLOBAL.DAY." + day | translate }}
      {{ shiftHours?.startTime }} ~
      {{ shiftHours?.endTime }}
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <mat-chip-list *ngIf="!!crew">
      <mat-chip
        *ngFor="let user of crew; let i = index"
        [ngClass]="{ deliver: (i == 0 || i == 1) && shiftHours?.deliver }"
      >
        {{ user.username }}
      </mat-chip>
      <ng-template [ngIf]="showEmpty">
        <mat-chip
          *ngFor="let count of emptiness"
          class="bg-warn text-white cursor-pointer"
          (click)="onEmptySpotClick()"
        >
          {{ "AVAILABLE_SHIFTS.NEED_SUPPORT" | translate }}
        </mat-chip>
      </ng-template>
    </mat-chip-list>

    <mat-spinner *ngIf="crew === null"></mat-spinner>
  </mat-card-content>

  <mat-card-actions *ngIf="crew !== null">
    <button
      mat-icon-button
      *ngIf="canEditStatistic$ | async"
      [ngClass]="{ 'has-statistic': shift?.hasStatistic }"
      (click)="openStatisticEditor()"
    >
      <mat-icon>add_chart</mat-icon>
    </button>

    <button
      mat-icon-button
      *ngIf="canEditCrew$ | async"
      (click)="openCrewEditor()"
    >
      <mat-icon>groups</mat-icon>
    </button>
  </mat-card-actions>
</mat-card>
